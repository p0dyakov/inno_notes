---
title: "4. Sum Rule, Product Rule, Chain Rule"
author: "Zakhar Podyakov"
date: "September 19, 2025"
format: html
engine: knitr
---

{{< video https://www.youtube.com/watch?v=YG15m2VwSjA&list=PLZHQObOWTQDMsr9K-rj53DwVRMYO3t5Yr&index=5 >}}

<!-- [QUIZ]() | [FLASHCARDS]() -->

#### **1. Summary**
##### **1.1 Introduction**
A common analogy describes the process of applying differentiation rules:

> "Using the chain rule is like peeling an onion: you have to deal with each layer at a time, and if it is too big you will start crying." - Anonymous Professor

While calculus often starts with finding derivatives of simple functions like $f(x) = x^3$ or $f(x) = \sin(x)$, most real-world applications involve functions that are combinations of these simpler forms. To handle these, we need rules for how to differentiate functions that are added, multiplied, or composed together.

##### **1.2 Three Basic Ways to Combine Functions**
There are three fundamental ways to combine two functions, $g(x)$ and $h(x)$:

- **Addition:** $g(x) + h(x)$
- **Multiplication:** $g(x) \cdot h(x)$
- **Composition:** $g(h(x))$ (plugging one function into another)

Each of these combinations has a corresponding rule for differentiation: the **Sum Rule**, the **Product Rule**, and the **Chain Rule**.

##### **1.3 The Sum Rule**
###### **1.3.1 The Rule**
The **Sum Rule** is the most straightforward. It states that the *derivative of a sum of functions is the sum of their individual derivatives*.

###### **1.3.2 Intuition**
Consider the function $f(x) = \sin(x) + x^2$. The value of $f(x)$ at any point is the sum of the heights of the $\sin(x)$ and $x^2$ graphs at that point.

A derivative measures how a function's output changes in response to a tiny nudge in its input. Let's nudge the input $x$ by a small amount, $dx$. The resulting change in the output, $df$, will be the sum of the changes from each part of the function.

- The change in $\sin(x)$ is $d(\sin(x))$.
- The change in $x^2$ is $d(x^2)$.

Therefore, the total change is $df = d(\sin(x)) + d(x^2)$. To find the derivative, we look at the ratio $df/dx$:
$$ \frac{df}{dx} = \frac{d(\sin(x)) + d(x^2)}{dx} = \frac{d}{dx}(\sin(x)) + \frac{d}{dx}(x^2) $$
Since we know the individual derivatives, we can complete the calculation:
$$ \frac{d}{dx}(\sin(x) + x^2) = \cos(x) + 2x $$
<!-- DIAGRAM HERE -->

##### **1.4 The Product Rule**
###### **1.4.1 The Rule**
The **Product Rule** is used to find the derivative of a product of two functions. Unlike the Sum Rule, it's not as simple as just multiplying the derivatives. The rule is expressed by the mnemonic: **"Left d(Right) + Right d(Left)"**.

###### **1.4.2 Intuition**
To visualize this, consider the function $f(x) = \sin(x) \cdot x^2$. We can think of this function as representing the **area of a rectangle** whose side lengths are $\sin(x)$ and $x^2$.

When we nudge the input $x$ by a small amount $dx$, both side lengths of the rectangle change.
- The side $\sin(x)$ changes by a small amount $d(\sin(x))$.
- The side $x^2$ changes by a small amount $d(x^2)$.

The total change in area, $df$, is the sum of the areas of the three new slivers that are added to the rectangle:
1.  A thin rectangle on the right side with area: $x^2 \cdot d(\sin(x))$
2.  A thin rectangle on the bottom with area: $\sin(x) \cdot d(x^2)$
3.  A tiny corner rectangle with area: $d(\sin(x)) \cdot d(x^2)$

The total change in area is $df = x^2 \cdot d(\sin(x)) + \sin(x) \cdot d(x^2) + d(\sin(x)) \cdot d(x^2)$.

The third term, the corner rectangle, is the product of two very small quantities. Since $d(\sin(x))$ is proportional to $dx$ and $d(x^2)$ is also proportional to $dx$, their product is proportional to $(dx)^2$, which is infinitesimally small and can be ignored.

So, the meaningful change in area is:
$$ df \approx x^2 \cdot d(\sin(x)) + \sin(x) \cdot d(x^2) $$
Dividing by $dx$ gives us the derivative:
$$ \frac{df}{dx} = x^2 \frac{d}{dx}(\sin(x)) + \sin(x) \frac{d}{dx}(x^2) = x^2\cos(x) + \sin(x)(2x) $$
<!-- DIAGRAM HERE -->

##### **1.5 The Chain Rule**
###### **1.5.1 The Rule**
The **Chain Rule** is used for differentiating composite functionsâ€”that is, a function inside another function, like $f(x) = \sin(x^2)$. The rule states that you take the *derivative of the outer function* (leaving the inner function as its input) and then *multiply by the derivative of the inner function*.

###### **1.5.2 Intuition**
Let's visualize the function $f(x) = \sin(x^2)$ as a three-step process using number lines.
1.  **Line 1:** An input value $x$.
2.  **Line 2:** The function $h(x) = x^2$ maps the value from Line 1 to a new value, $h$, on Line 2.
3.  **Line 3:** The function $g(h) = \sin(h)$ maps the value from Line 2 to the final output, $\sin(x^2)$, on Line 3.

We want to find how a tiny change, $dx$, on Line 1 affects the final value on Line 3.
- A change $dx$ on Line 1 causes a change $d(x^2)$ on Line 2. From the definition of a derivative, we know $d(x^2) \approx 2x \cdot dx$. Let's call this change $dh$.
- This change $dh$ on Line 2 causes a change $d(\sin(h))$ on Line 3. Again, from the definition of a derivative, this change is $d(\sin(h)) \approx \cos(h) \cdot dh$.

Now, we substitute everything back in terms of $x$:
- The change on Line 3 is: $d(\sin(x^2))$.
- This is equal to $\cos(h) \cdot dh$, which becomes $\cos(x^2) \cdot d(x^2)$.
- Substituting $d(x^2)$ gives: $\cos(x^2) \cdot (2x \cdot dx)$.

So, the total change in the output is $d(\sin(x^2)) = \cos(x^2) \cdot 2x \cdot dx$. To get the derivative, we divide by $dx$:
$$ \frac{d}{dx}\sin(x^2) = \cos(x^2) \cdot 2x $$
This process perfectly illustrates the Chain Rule: the derivative of the outer function, $\cos(\cdot)$, evaluated at the inner function, $x^2$, multiplied by the derivative of the inner function, $2x$.
<!-- DIAGRAM HERE -->

#### **2. Definitions**
*   **Sum Rule**: A differentiation rule stating that the derivative of a sum of two or more functions is the sum of their individual derivatives.
*   **Product Rule**: A differentiation rule for finding the derivative of the product of two functions. It is given by the formula $d/dx(g(x)h(x)) = g(x)h'(x) + h(x)g'(x)$.
*   **Chain Rule**: A differentiation rule for finding the derivative of a composite function. It is given by the formula $d/dx(g(h(x))) = g'(h(x)) \cdot h'(x)$.
*   **Function Composition**: The process of applying one function to the result of another. The composition of $g$ and $h$ is denoted as $g(h(x))$.

#### **3. Formulas**
*   **Sum Rule**:
    $$ \frac{d}{dx}(g(x) + h(x)) = \frac{dg}{dx} + \frac{dh}{dx} $$
*   **Product Rule**:
    $$ \frac{d}{dx}(g(x)h(x)) = g(x)\frac{dh}{dx} + h(x)\frac{dg}{dx} $$
*   **Chain Rule (Leibniz Notation)**:
    $$ \frac{dg}{dx} = \frac{dg}{dh} \cdot \frac{dh}{dx} $$
*   **Chain Rule (Prime Notation)**:
    $$ \frac{d}{dx}g(h(x)) = g'(h(x)) \cdot h'(x) $$

#### **4. Mistakes**
*   **Confusing the Product Rule with the Sum Rule:** A common mistake is to assume the derivative of a product is the product of the derivatives, i.e., $(gh)' = g'h'$. **Why it's wrong:** The product rule, $g'h + gh'$, accounts for how a change in each function affects the overall product, which involves two terms, not one.
*   **Forgetting the Inner Derivative in the Chain Rule:** Applying the derivative to the outer function but forgetting to multiply by the derivative of the inner function. **Why it's wrong:** The chain rule links the rate of change of the outer function to the rate of change of the inner function. Omitting the inner derivative ignores this crucial link.
*   **Incorrectly Evaluating the Outer Derivative:** When applying the chain rule to $g(h(x))$, evaluating the derivative of the outer function at $x$ instead of at $h(x)$. For example, for $\sin(x^2)$, writing $\cos(x) \cdot 2x$. **Why it's wrong:** The rate of change of the outer function depends on the value of its immediate input, which is $h(x)$, not the original variable $x$.
*   **Applying the Sum Rule for Products:** Incorrectly applying the simple addition rule to a product of functions. **Why it's wrong:** Addition and multiplication are fundamentally different operations, and their differentiation rules reflect this.

#### **5. Examples**
##### **5.1. Sum Rule Example**
**Question:** Find the derivative of $f(x) = x^4 + \cos(x)$.
<details>
<summary>Click to see the solution</summary>
1.  **Apply the Sum Rule:** The derivative of the sum is the sum of the derivatives.
    $$ \frac{df}{dx} = \frac{d}{dx}(x^4) + \frac{d}{dx}(\cos(x)) $$
2.  **Differentiate each term:**
    - The derivative of $x^4$ is $4x^3$.
    - The derivative of $\cos(x)$ is $-\sin(x)$.
3.  **Combine the results:**
    $$ \frac{df}{dx} = 4x^3 - \sin(x) $$

**Answer:** $f'(x) = 4x^3 - \sin(x)$.
</details>

##### **5.2. Product Rule Example**
**Question:** Find the derivative of $f(x) = x^2 \sin(x)$.
<details>
<summary>Click to see the solution</summary>
1.  **Identify Left and Right Functions:** Let Left = $x^2$ and Right = $\sin(x)$.
2.  **Find their derivatives:**
    - $d(\text{Left})/dx = 2x$
    - $d(\text{Right})/dx = \cos(x)$
3.  **Apply the Product Rule Formula:** Left $\cdot$ d(Right) + Right $\cdot$ d(Left)
    $$ \frac{df}{dx} = (x^2)(\cos(x)) + (\sin(x))(2x) $$

**Answer:** $f'(x) = x^2\cos(x) + 2x\sin(x)$.
</details>

##### **5.3. Chain Rule Example**
**Question:** Find the derivative of $f(x) = (x^3 + 2x)^5$.
<details>
<summary>Click to see the solution</summary>
1.  **Identify Outer and Inner Functions:**
    - Outer function: $g(h) = h^5$
    - Inner function: $h(x) = x^3 + 2x$
2.  **Find their derivatives:**
    - $g'(h) = 5h^4$
    - $h'(x) = 3x^2 + 2$
3.  **Apply the Chain Rule Formula:** $g'(h(x)) \cdot h'(x)$
    $$ \frac{df}{dx} = 5(x^3 + 2x)^4 \cdot (3x^2 + 2) $$

**Answer:** $f'(x) = 5(3x^2 + 2)(x^3 + 2x)^4$.
</details>

##### **5.4. Combination of Rules (1)**
**Question:** Differentiate $f(x) = e^x(\sin(x) + x^2)$.
<details>
<summary>Click to see the solution</summary>
1.  **Identify the main operation:** This is a product, so we use the Product Rule. Let Left = $e^x$ and Right = $(\sin(x) + x^2)$.
2.  **Find their derivatives:**
    - $d(\text{Left})/dx = e^x$
    - For the right side, we use the Sum Rule: $d(\text{Right})/dx = \cos(x) + 2x$.
3.  **Apply the Product Rule Formula:** Left $\cdot$ d(Right) + Right $\cdot$ d(Left)
    $$ \frac{df}{dx} = e^x(\cos(x) + 2x) + (\sin(x) + x^2)e^x $$
4.  **Simplify (optional):**
    $$ \frac{df}{dx} = e^x(\cos(x) + 2x + \sin(x) + x^2) $$

**Answer:** $f'(x) = e^x(\cos(x) + \sin(x) + x^2 + 2x)$.
</details>

##### **5.5. Combination of Rules (2)**
**Question:** Differentiate $f(x) = \cos(x^4)$.
<details>
<summary>Click to see the solution</summary>
1.  **Identify Outer and Inner Functions:** This is a composition.
    - Outer function: $g(h) = \cos(h)$
    - Inner function: $h(x) = x^4$
2.  **Find their derivatives:**
    - $g'(h) = -\sin(h)$
    - $h'(x) = 4x^3$
3.  **Apply the Chain Rule Formula:** $g'(h(x)) \cdot h'(x)$
    $$ \frac{df}{dx} = -\sin(x^4) \cdot (4x^3) $$

**Answer:** $f'(x) = -4x^3\sin(x^4)$.
</details>

##### **5.6. Nested Chain Rule**
**Question:** Differentiate $f(x) = e^{\sin(x^2)}$.
<details>
<summary>Click to see the solution</summary>
1.  **Identify the outermost layer:** The outer function is $e^{(\cdot)}$. The inner function is $\sin(x^2)$.
2.  **Apply the Chain Rule:**
    $$ \frac{df}{dx} = e^{\sin(x^2)} \cdot \frac{d}{dx}(\sin(x^2)) $$
3.  **Differentiate the inner part:** Now we need the derivative of $\sin(x^2)$. This requires another application of the chain rule.
    - Outer function: $\sin(\cdot)$
    - Inner function: $x^2$
    - Derivative: $\cos(x^2) \cdot 2x$
4.  **Combine everything:**
    $$ \frac{df}{dx} = e^{\sin(x^2)} \cdot (\cos(x^2) \cdot 2x) $$

**Answer:** $f'(x) = 2x \cos(x^2) e^{\sin(x^2)}$.
</details>

##### **5.7. Product and Chain Rule Combined**
**Question:** Differentiate $f(x) = x^3 \tan(5x)$.
<details>
<summary>Click to see the solution</summary>
1.  **Identify the main operation:** This is a product, so we start with the Product Rule. Let Left = $x^3$ and Right = $\tan(5x)$.
2.  **Find their derivatives:**
    - $d(\text{Left})/dx = 3x^2$
    - To find the derivative of $\tan(5x)$, we use the Chain Rule:
        - Outer: $\tan(\cdot)$, Derivative: $\sec^2(\cdot)$
        - Inner: $5x$, Derivative: $5$
        - $d(\text{Right})/dx = \sec^2(5x) \cdot 5 = 5\sec^2(5x)$.
3.  **Apply the Product Rule Formula:** Left $\cdot$ d(Right) + Right $\cdot$ d(Left)
    $$ \frac{df}{dx} = (x^3)(5\sec^2(5x)) + (\tan(5x))(3x^2) $$

**Answer:** $f'(x) = 5x^3\sec^2(5x) + 3x^2\tan(5x)$.
</details>
