---
title: "4. Matrix Multiplication, Composition of Linear Transformations"
author: "Zakhar Podyakov"
date: "September 18, 2025"
format: html
engine: knitr
---

{{< video https://www.youtube.com/watch?v=XkY2DOUCWMU&list=PLZHQObOWTQDPD3MizzM2xVFitgF8hE_ab&index=5 >}}

<!-- [QUIZ]() | [FLASHCARDS]() -->

#### **1. Summary**
##### **1.1 Recap: Linear Transformations and Matrices**
A **linear transformation** is a function that takes a vector as an input and produces another vector as an output. Geometrically, it's a transformation of space that keeps grid lines parallel and evenly spaced, and the origin remains fixed.

A key principle is that a linear transformation is entirely determined by where it sends the basis vectors, `î` and `ĵ` in two dimensions. Any vector `v` with coordinates $\begin{pmatrix} x \\ y \end{pmatrix}$ can be expressed as a linear combination of these basis vectors: $ \vec{v} = x\hat{i} + y\hat{j} $.

Because the transformation is linear, the transformed vector `L(v)` can be found using the same linear combination of the transformed basis vectors:
$$ L(\vec{v}) = xL(\hat{i}) + yL(\hat{j}) $$

The transformation is captured numerically by a **matrix**, where the columns are the coordinates of the transformed basis vectors. The first column is `L(î)` and the second column is `L(ĵ)`. Multiplying this matrix by a vector $\begin{pmatrix} x \\ y \end{pmatrix}$ is the computational method for applying the transformation.

<!-- DIAGRAM HERE -->

##### **1.2 Composition of Transformations**
Often, you might want to apply multiple linear transformations sequentially. For instance, you could first apply a rotation and then a shear. The overall effect, from start to finish, is a single new linear transformation called the **composition** of the two original transformations.

Like any linear transformation, this composite transformation can be described by its own matrix. The question is how to find this new matrix from the original two.

##### **1.3 Matrix Multiplication as Composition**
The product of two matrices, say $M_2 M_1$, represents the geometric action of applying the transformation of $M_1$ first, followed by the transformation of $M_2$. To find the matrix for this composite transformation, we track where the basis vectors `î` and `ĵ` land.

1.  **Track î**:
    *   First, apply transformation $M_1$ to `î`. The resulting vector is given by the first column of $M_1$.
    *   Then, apply transformation $M_2$ to this new vector. This is done by multiplying the matrix $M_2$ by the first column of $M_1$.
    *   The final vector is the first column of the new composition matrix, $M_2 M_1$.

2.  **Track ĵ**:
    *   Similarly, apply $M_1$ to `ĵ`. The result is the second column of $M_1$.
    *   Apply $M_2$ to that resulting vector by multiplying $M_2$ by the second column of $M_1$.
    *   The final vector is the second column of the composition matrix, $M_2 M_1$.

###### **1.3.1 The Order of Multiplication Matters**
When composing transformations, the order is crucial. Applying a rotation and then a shear gives a different result than applying a shear and then a rotation.

<!-- DIAGRAM HERE -->

This means that matrix multiplication is **not commutative**; in general, $M_1 M_2 \neq M_2 M_1$. The order of operations is read from *right to left*, just like in function notation. For the product $M_2 M_1$, you first apply the transformation on the right ($M_1$), then the one on the left ($M_2$).

##### **1.4 Associativity**
While not commutative, matrix multiplication is **associative**. This means if you are multiplying three matrices, say `A`, `B`, and `C`, the order of multiplication doesn't change the result:
$$ (AB)C = A(BC) $$
Geometrically, this is intuitive. Both sides of the equation represent applying transformation `C`, then `B`, then `A`. It doesn't matter if you first combine `B` and `C` into a single transformation `BC` and then apply `A`, or if you first combine `A` and `B` into `AB` and then apply `C`. The sequence of transformations remains the same.

This geometric intuition provides a clear understanding of associativity, which is much more enlightening than a tedious numerical proof. As mathematician Emil Artin noted, "It is my experience that proofs involving matrices can be shortened by 50% if one throws the matrices out."

#### **2. Definitions**
*   **Composition (of transformations)**: The overall transformation resulting from applying one linear transformation followed by another.
*   **Matrix Multiplication**: The operation of multiplying two matrices, which corresponds to the composition of their respective linear transformations. The product $M_2 M_1$ represents applying transformation $M_1$ first, then $M_2$.
*   **Commutativity**: A property of an operation where the order of operands does not change the outcome (e.g., $a+b = b+a$). Matrix multiplication is generally **not** commutative.
*   **Associativity**: A property of an operation where the grouping of operands does not change the outcome. Matrix multiplication is associative: $(AB)C = A(BC)$.

#### **3. Formulas**
*   **Matrix-Vector Multiplication**:
    $$ \begin{pmatrix} a & b \\ c & d \end{pmatrix} \begin{pmatrix} x \\ y \end{pmatrix} = x \begin{pmatrix} a \\ c \end{pmatrix} + y \begin{pmatrix} b \\ d \end{pmatrix} = \begin{pmatrix} ax + by \\ cx + dy \end{pmatrix} $$

*   **2x2 Matrix Multiplication**:
    $$ \begin{pmatrix} a & b \\ c & d \end{pmatrix} \begin{pmatrix} e & f \\ g & h \end{pmatrix} = \begin{pmatrix} ae+bg & af+bh \\ ce+dg & cf+dh \end{pmatrix} $$

*   **Associative Property**:
    $$ (M_1 M_2) M_3 = M_1 (M_2 M_3) $$

#### **4. Mistakes**
*   **Assuming matrix multiplication is commutative:** Believing that $M_1 M_2$ is always equal to $M_2 M_1$. **Why it's wrong:** Applying transformations in different orders generally produces different final results. For example, rotating then shearing is not the same as shearing then rotating.
*   **Reading the order of operations from left to right:** In the product $M_2 M_1$, applying the transformation $M_2$ first. **Why it's wrong:** The convention comes from function notation. The matrix on the right represents the first transformation to be applied, and you proceed to the left.
*   **Multiplying matrices element-wise:** Multiplying the corresponding entries of two matrices. **Why it's wrong:** This operation is not standard matrix multiplication and does not represent the composition of linear transformations.
*   **Forgetting the geometric interpretation:** Treating matrix multiplication as a purely mechanical, symbol-pushing process. **Why it's wrong:** Understanding the geometry (composition of transformations) provides intuition for why the rules work the way they do and helps in remembering properties like non-commutativity and associativity.

#### **5. Examples**
##### **5.1 Rotation then Shear**
**Question:** Let $M_1$ be a 90-degree counter-clockwise rotation and $M_2$ be a shear. Find the composition matrix for applying the rotation first, then the shear. The rotation matrix is $M_1 = \begin{pmatrix} 0 & -1 \\ 1 & 0 \end{pmatrix}$, and the shear matrix is $M_2 = \begin{pmatrix} 1 & 1 \\ 0 & 1 \end{pmatrix}$.
<details>
<summary>Click to see the solution</summary>
Since the rotation is applied first, we compute the product $M_2 M_1$.
$$ M_2 M_1 = \begin{pmatrix} 1 & 1 \\ 0 & 1 \end{pmatrix} \begin{pmatrix} 0 & -1 \\ 1 & 0 \end{pmatrix} $$
1.  **First column:** Multiply $M_2$ by the first column of $M_1$, $\begin{pmatrix} 0 \\ 1 \end{pmatrix}$.
    $$ \begin{pmatrix} 1 & 1 \\ 0 & 1 \end{pmatrix} \begin{pmatrix} 0 \\ 1 \end{pmatrix} = 0 \begin{pmatrix} 1 \\ 0 \end{pmatrix} + 1 \begin{pmatrix} 1 \\ 1 \end{pmatrix} = \begin{pmatrix} 1 \\ 1 \end{pmatrix} $$
2.  **Second column:** Multiply $M_2$ by the second column of $M_1$, $\begin{pmatrix} -1 \\ 0 \end{pmatrix}$.
    $$ \begin{pmatrix} 1 & 1 \\ 0 & 1 \end{pmatrix} \begin{pmatrix} -1 \\ 0 \end{pmatrix} = -1 \begin{pmatrix} 1 \\ 0 \end{pmatrix} + 0 \begin{pmatrix} 1 \\ 1 \end{pmatrix} = \begin{pmatrix} -1 \\ 0 \end{pmatrix} $$
**Answer:** The composition matrix is $\begin{pmatrix} 1 & -1 \\ 1 & 0 \end{pmatrix}$.
</details>

##### **5.2 Shear then Rotation**
**Question:** Using the same matrices as above, find the composition matrix for applying the shear first, then the rotation.
<details>
<summary>Click to see the solution</summary>
Since the shear is applied first, we compute the product $M_1 M_2$.
$$ M_1 M_2 = \begin{pmatrix} 0 & -1 \\ 1 & 0 \end{pmatrix} \begin{pmatrix} 1 & 1 \\ 0 & 1 \end{pmatrix} $$
1.  **First column:** Multiply $M_1$ by the first column of $M_2$, $\begin{pmatrix} 1 \\ 0 \end{pmatrix}$.
    $$ \begin{pmatrix} 0 & -1 \\ 1 & 0 \end{pmatrix} \begin{pmatrix} 1 \\ 0 \end{pmatrix} = 1 \begin{pmatrix} 0 \\ 1 \end{pmatrix} + 0 \begin{pmatrix} -1 \\ 0 \end{pmatrix} = \begin{pmatrix} 0 \\ 1 \end{pmatrix} $$
2.  **Second column:** Multiply $M_1$ by the second column of $M_2$, $\begin{pmatrix} 1 \\ 1 \end{pmatrix}$.
    $$ \begin{pmatrix} 0 & -1 \\ 1 & 0 \end{pmatrix} \begin{pmatrix} 1 \\ 1 \end{pmatrix} = 1 \begin{pmatrix} 0 \\ 1 \end{pmatrix} + 1 \begin{pmatrix} -1 \\ 0 \end{pmatrix} = \begin{pmatrix} -1 \\ 1 \end{pmatrix} $$
**Answer:** The composition matrix is $\begin{pmatrix} 0 & -1 \\ 1 & 1 \end{pmatrix}$. Notice this is different from the previous example.
</details>

##### **5.3 Numerical Multiplication 1**
**Question:** Compute the product of $A = \begin{pmatrix} 1 & -2 \\ 1 & 0 \end{pmatrix}$ and $B = \begin{pmatrix} 0 & 2 \\ 1 & 0 \end{pmatrix}$.
<details>
<summary>Click to see the solution</summary>
We want to find $AB$.
$$ AB = \begin{pmatrix} 1 & -2 \\ 1 & 0 \end{pmatrix} \begin{pmatrix} 0 & 2 \\ 1 & 0 \end{pmatrix} $$
1.  **First column:** $\begin{pmatrix} 1 & -2 \\ 1 & 0 \end{pmatrix} \begin{pmatrix} 0 \\ 1 \end{pmatrix} = 0\begin{pmatrix} 1 \\ 1 \end{pmatrix} + 1\begin{pmatrix} -2 \\ 0 \end{pmatrix} = \begin{pmatrix} -2 \\ 0 \end{pmatrix}$
2.  **Second column:** $\begin{pmatrix} 1 & -2 \\ 1 & 0 \end{pmatrix} \begin{pmatrix} 2 \\ 0 \end{pmatrix} = 2\begin{pmatrix} 1 \\ 1 \end{pmatrix} + 0\begin{pmatrix} -2 \\ 0 \end{pmatrix} = \begin{pmatrix} 2 \\ 2 \end{pmatrix}$
**Answer:** The product is $\begin{pmatrix} -2 & 2 \\ 0 & 2 \end{pmatrix}$.
</details>

##### **5.4 Numerical Multiplication 2**
**Question:** Compute the product of $A = \begin{pmatrix} 2 & 1 \\ 3 & 4 \end{pmatrix}$ and $B = \begin{pmatrix} 5 & 6 \\ 7 & 8 \end{pmatrix}$.
<details>
<summary>Click to see the solution</summary>
We calculate $AB$ using the formula: $ \begin{pmatrix} ae+bg & af+bh \\ ce+dg & cf+dh \end{pmatrix} $.
$$ \begin{pmatrix} 2(5)+1(7) & 2(6)+1(8) \\ 3(5)+4(7) & 3(6)+4(8) \end{pmatrix} $$
$$ \begin{pmatrix} 10+7 & 12+8 \\ 15+28 & 18+32 \end{pmatrix} $$
**Answer:** The product is $\begin{pmatrix} 17 & 20 \\ 43 & 50 \end{pmatrix}$.
</details>

##### **5.5 Verifying Non-Commutativity**
**Question:** Given $M_1 = \begin{pmatrix} 1 & 1 \\ 0 & 1 \end{pmatrix}$ and $M_2 = \begin{pmatrix} 2 & 0 \\ 0 & 1/2 \end{pmatrix}$, show that $M_1 M_2 \neq M_2 M_1$.
<details>
<summary>Click to see the solution</summary>
First, compute $M_1 M_2$:
$$ M_1 M_2 = \begin{pmatrix} 1 & 1 \\ 0 & 1 \end{pmatrix} \begin{pmatrix} 2 & 0 \\ 0 & 1/2 \end{pmatrix} = \begin{pmatrix} 1(2)+1(0) & 1(0)+1(1/2) \\ 0(2)+1(0) & 0(0)+1(1/2) \end{pmatrix} = \begin{pmatrix} 2 & 1/2 \\ 0 & 1/2 \end{pmatrix} $$
Next, compute $M_2 M_1$:
$$ M_2 M_1 = \begin{pmatrix} 2 & 0 \\ 0 & 1/2 \end{pmatrix} \begin{pmatrix} 1 & 1 \\ 0 & 1 \end{pmatrix} = \begin{pmatrix} 2(1)+0(0) & 2(1)+0(1) \\ 0(1)+1/2(0) & 0(1)+1/2(1) \end{pmatrix} = \begin{pmatrix} 2 & 2 \\ 0 & 1/2 \end{pmatrix} $$
**Answer:** Since $\begin{pmatrix} 2 & 1/2 \\ 0 & 1/2 \end{pmatrix} \neq \begin{pmatrix} 2 & 2 \\ 0 & 1/2 \end{pmatrix}$, the matrices do not commute.
</details>

##### **5.6 Verifying Associativity**
**Question:** Given $A = \begin{pmatrix} 1 & 0 \\ 1 & 1 \end{pmatrix}$, $B = \begin{pmatrix} 2 & 1 \\ 0 & 1 \end{pmatrix}$, and $C = \begin{pmatrix} 3 & 3 \\ 2 & 1 \end{pmatrix}$, show that $(AB)C = A(BC)$.
<details>
<summary>Click to see the solution</summary>
First, compute the left side, $(AB)C$:
$$ AB = \begin{pmatrix} 1 & 0 \\ 1 & 1 \end{pmatrix} \begin{pmatrix} 2 & 1 \\ 0 & 1 \end{pmatrix} = \begin{pmatrix} 2 & 1 \\ 2 & 2 \end{pmatrix} $$
$$ (AB)C = \begin{pmatrix} 2 & 1 \\ 2 & 2 \end{pmatrix} \begin{pmatrix} 3 & 3 \\ 2 & 1 \end{pmatrix} = \begin{pmatrix} 2(3)+1(2) & 2(3)+1(1) \\ 2(3)+2(2) & 2(3)+2(1) \end{pmatrix} = \begin{pmatrix} 8 & 7 \\ 10 & 8 \end{pmatrix} $$
Next, compute the right side, $A(BC)$:
$$ BC = \begin{pmatrix} 2 & 1 \\ 0 & 1 \end{pmatrix} \begin{pmatrix} 3 & 3 \\ 2 & 1 \end{pmatrix} = \begin{pmatrix} 2(3)+1(2) & 2(3)+1(1) \\ 0(3)+1(2) & 0(3)+1(1) \end{pmatrix} = \begin{pmatrix} 8 & 7 \\ 2 & 1 \end{pmatrix} $$
$$ A(BC) = \begin{pmatrix} 1 & 0 \\ 1 & 1 \end{pmatrix} \begin{pmatrix} 8 & 7 \\ 2 & 1 \end{pmatrix} = \begin{pmatrix} 1(8)+0(2) & 1(7)+0(1) \\ 1(8)+1(2) & 1(7)+1(1) \end{pmatrix} = \begin{pmatrix} 8 & 7 \\ 10 & 8 \end{pmatrix} $$
**Answer:** Both sides yield the same result, $\begin{pmatrix} 8 & 7 \\ 10 & 8 \end{pmatrix}$, demonstrating associativity.
</details>

##### **5.7 Multiplication with Identity Matrix**
**Question:** Let $A = \begin{pmatrix} a & b \\ c & d \end{pmatrix}$ and $I = \begin{pmatrix} 1 & 0 \\ 0 & 1 \end{pmatrix}$. Compute $AI$ and $IA$.
<details>
<summary>Click to see the solution</summary>
First, compute $AI$:
$$ AI = \begin{pmatrix} a & b \\ c & d \end{pmatrix} \begin{pmatrix} 1 & 0 \\ 0 & 1 \end{pmatrix} = \begin{pmatrix} a(1)+b(0) & a(0)+b(1) \\ c(1)+d(0) & c(0)+d(1) \end{pmatrix} = \begin{pmatrix} a & b \\ c & d \end{pmatrix} $$
Next, compute $IA$:
$$ IA = \begin{pmatrix} 1 & 0 \\ 0 & 1 \end{pmatrix} \begin{pmatrix} a & b \\ c & d \end{pmatrix} = \begin{pmatrix} 1(a)+0(c) & 1(b)+0(d) \\ 0(a)+1(c) & 0(b)+1(d) \end{pmatrix} = \begin{pmatrix} a & b \\ c & d \end{pmatrix} $$
**Answer:** Both $AI$ and $IA$ equal $A$. The matrix $I$ is the **identity matrix**, and it represents a transformation that does nothing.
</details>