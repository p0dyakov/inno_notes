<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Zakhar Podyakov">
<meta name="dcterms.date" content="2025-09-16">

<title>3. Pointers, Declarations, Preprocessing, and File I/O – InnoNotes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-42ed7287b56c5c583e2c2463c9cf4916.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Introduction to Programming/lec_1.html">Introduction to Programming</a></li><li class="breadcrumb-item"><a href="../Introduction to Programming/lec_3.html">3. Pointers, Declarations, Preprocessing, and File I/O</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Academic Writing and Argumentation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Academic Writing and Argumentation/lec_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Effective Sentence Structure, Clauses, and Sentence Types</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Academic Writing and Argumentation/lec_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Principles of Effective Academic Writing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Academic Writing and Argumentation/lec_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. Sentence Problems, Punctuation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Academic Writing and Argumentation/lec_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4. Writing an Effective Paragraph, Paragraph Structure, Transitions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Academic Writing and Argumentation/lec_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5. Avoiding Plagiarism, Referencing, Summarizing, Paraphrasing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Academic Writing and Argumentation/lec_6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6. Descriptive Paragraph</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Analytical Geometry and Linear Algebra I</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Analytical Geometry and Linear Algebra I /lec_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Vectors, Vector Spaces, and Linear Independence</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Analytical Geometry and Linear Algebra I /lec_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Inner Product, Dot Product, Vector Norms, Orthogonality, Vector Projection</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Analytical Geometry and Linear Algebra I /lec_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. Matrices and Determinants, Vector Cross Product, Scalar Triple Product</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Computer Architecture</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Computer Architecture/lec_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Computer Architecture Fundamentals, CPU Components, Memory Hierarchy, FPGAs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Computer Architecture/lec_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Fundamental Ideas of Computer Architecture</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Discrete Mathematics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Discrete Mathematics/lec_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Truth Tables, Disjunctive Normal Form (DNF), Conjunctive Normal Form (CNF)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Discrete Mathematics/lec_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Logical Equivalence, Normal Forms (DNF, CNF, ANF)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Introduction to Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Introduction to Programming/lec_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Introduction to Programming and C, Compilation, Memory</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Introduction to Programming/lec_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Memory, Pointers, and Types</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Introduction to Programming/lec_3.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">3. Pointers, Declarations, Preprocessing, and File I/O</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Mathematical Analysis I</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Mathematical Analysis I/lec_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Set Theory, Complex Numbers, Mathematical Induction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Mathematical Analysis I/lec_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Complex Numbers, Set Theory, Real Numbers, Mathematical Induction</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Introduction to Programming/lec_1.html">Introduction to Programming</a></li><li class="breadcrumb-item"><a href="../Introduction to Programming/lec_3.html">3. Pointers, Declarations, Preprocessing, and File I/O</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">3. Pointers, Declarations, Preprocessing, and File I/O</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Zakhar Podyakov </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 16, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="summary" class="level4">
<h4 class="anchored" data-anchor-id="summary">1. Summary</h4>
<p>This document provides a foundational overview of several advanced topics in the C programming language: pointers, complex declarations, the preprocessor, and file input/output. These concepts are essential for moving beyond basic programming and are fundamental to understanding how C interacts with system memory and the file system.</p>
<section id="pointers" class="level5">
<h5 class="anchored" data-anchor-id="pointers">1.1 Pointers</h5>
<p>A <strong>pointer</strong> is a special type of variable that does not hold a data value (like an integer or character) but instead holds a <em>memory address</em>. It “points” to the location where another variable is stored. This allows for indirect manipulation of data, dynamic memory management, and efficient handling of complex data structures.</p>
<ul>
<li><strong>Declaration</strong>: Pointers are declared using an asterisk (<code>*</code>) between the data type and the variable name. For example, <code>int *ptr;</code> declares a pointer named <code>ptr</code> that can hold the address of an integer.</li>
<li><strong>Address-of Operator (<code>&amp;</code>)</strong>: This unary operator returns the memory address of a variable. To make <code>ptr</code> point to an integer variable <code>var</code>, you would write <code>ptr = &amp;var;</code>.</li>
<li><strong>Dereference Operator (<code>*</code>)</strong>: This unary operator accesses the value stored at the memory address held by a pointer. For example, <code>*ptr</code> would retrieve the value of <code>var</code>. You can also use it to modify the value: <code>*ptr = 20;</code> would change the value of <code>var</code> to 20.</li>
<li><strong>Pointers and Arrays</strong>: In C, an array’s name can be treated as a constant pointer to its first element. This means <code>array</code> is equivalent to <code>&amp;array[0]</code>. This relationship allows for <strong>pointer arithmetic</strong>, where you can increment or decrement a pointer to move through the elements of an array (e.g., <code>*(array + 1)</code> is the same as <code>array[1]</code>).</li>
<li><strong>Dynamic Memory Allocation</strong>: Pointers are crucial for managing the <strong>heap</strong>, a region of memory for data whose size is not known at compile time.
<ul>
<li><code>malloc(size)</code>: The “memory allocation” function reserves a block of memory of a specified <code>size</code> (in bytes) on the heap. It returns a generic <code>void*</code> pointer to the start of that block.</li>
<li><code>free(ptr)</code>: This function releases a block of memory previously allocated with <code>malloc</code>, returning it to the system. It is the programmer’s responsibility to free any memory they allocate.</li>
</ul></li>
</ul>
</section>
<section id="declarations" class="level5">
<h5 class="anchored" data-anchor-id="declarations">1.2 Declarations</h5>
<p>C’s declaration syntax allows for creating complex types by combining pointers (<code>*</code>), arrays (<code>[]</code>), and functions (<code>()</code>). Understanding the rules of precedence and associativity is key to reading them correctly.</p>
<ul>
<li><strong>Basic Components</strong>: A declaration consists of a <strong>storage class</strong> (<code>static</code>, <code>extern</code>), a <strong>type specifier</strong> (<code>int</code>, <code>struct S</code>), an <strong>entity name</strong>, and an optional <strong>initializer</strong>.</li>
<li><strong>Reading Complex Declarations</strong>: A helpful heuristic is the <strong>“Clockwise/Spiral Rule”</strong>. Start with the variable name, then move in a spiral/clockwise direction. When you encounter a <code>*</code>, say “pointer to”. When you see <code>[]</code>, say “array of”. When you find <code>()</code>, say “function returning”. Parentheses can be used to override the default precedence.
<ul>
<li>Example: <code>int *(*f)(int);</code>
<ol type="1">
<li>Start at <code>f</code>: “<code>f</code> is…”</li>
<li>Move right, hit <code>)</code>: move left to <code>*</code>: “…a pointer to…”</li>
<li>Move out of parentheses, hit <code>(int)</code>: “…a function taking an <code>int</code>…”</li>
<li>Move left, hit <code>*</code>: “…returning a pointer to…”</li>
<li>End at <code>int</code>: “…an <code>int</code>.”</li>
</ol>
<ul>
<li>Full reading: <code>f</code> is a pointer to a function taking an <code>int</code> and returning a pointer to an <code>int</code>.</li>
</ul></li>
</ul></li>
<li><strong><code>typedef</code> Declarations</strong>: The <code>typedef</code> keyword allows you to create an <strong>alias</strong> for a data type. This is extremely useful for simplifying complex declarations and improving code readability. For example, <code>typedef int (*MathFunc)(int);</code> creates a new type name <code>MathFunc</code> that can be used to declare pointers to functions that take an <code>int</code> and return an <code>int</code>.</li>
</ul>
</section>
<section id="preprocessing" class="level5">
<h5 class="anchored" data-anchor-id="preprocessing">1.3 Preprocessing</h5>
<p>The C preprocessor is a text-processing tool that runs <em>before</em> the actual compilation of the source code. It scans the code for specific instructions, known as <strong>preprocessor directives</strong>, which all begin with a hash symbol (<code>#</code>).</p>
<ul>
<li><strong><code>#include</code></strong>: This directive includes the content of another file into the current source file. It is most commonly used to include header files (<code>.h</code>) which contain function declarations and macro definitions.
<ul>
<li><code>#include &lt;stdio.h&gt;</code>: Looks for the file in standard system directories.</li>
<li><code>#include "myheader.h"</code>: Looks for the file in the current project directory first.</li>
</ul></li>
<li><strong><code>#define</code></strong>: This directive is used to create <strong>macros</strong>.
<ul>
<li><strong>Object-like macros</strong>: Replace a name with a value (e.g., <code>#define PI 3.14159</code>).</li>
<li><strong>Function-like macros</strong>: Behave like simple functions but are expanded inline via text substitution. This can be faster but is prone to errors if not written carefully (see Mistakes section).</li>
</ul></li>
<li><strong>Conditional Compilation</strong>: These directives allow you to include or exclude parts of the code based on certain conditions. This is useful for writing code that can be compiled for different platforms or for debugging purposes.
<ul>
<li><code>#ifdef MACRO_NAME</code>: Includes the following code only if <code>MACRO_NAME</code> has been defined.</li>
<li><code>#ifndef MACRO_NAME</code>: The opposite of <code>#ifdef</code>. Often used in header files to prevent them from being included multiple times.</li>
<li><code>#if expression</code>: Includes code if a constant <code>expression</code> evaluates to true (non-zero).</li>
<li><code>#else</code>, <code>#elif</code>, <code>#endif</code>: Used to build more complex conditional logic.</li>
</ul></li>
</ul>
</section>
<section id="file-io" class="level5">
<h5 class="anchored" data-anchor-id="file-io">1.4 File I/O</h5>
<p>File Input/Output (I/O) in C is handled through a set of standard library functions defined in <code>&lt;stdio.h&gt;</code>. All file operations use a special pointer type called <code>FILE *</code>, which acts as a stream handle.</p>
<ul>
<li><strong>Opening a File</strong>: The <code>fopen()</code> function is used to open a file and prepare it for reading or writing. It returns a <code>FILE *</code> pointer on success or <code>NULL</code> on failure.
<ul>
<li>Syntax: <code>FILE *fp = fopen("filename.txt", "mode");</code></li>
</ul></li>
<li><strong>File Modes</strong>: The mode is a string that specifies the intended operation:
<ul>
<li><code>"r"</code>: Read-only. The file must exist.</li>
<li><code>"w"</code>: Write-only. Creates the file if it doesn’t exist; otherwise, <strong>erases its contents</strong>.</li>
<li><code>"a"</code>: Append. Creates the file if it doesn’t exist. All writes occur at the end of the file.</li>
<li>Adding a <code>+</code> (e.g., <code>"r+"</code>, <code>"w+"</code>) opens the file for both reading and writing (update).</li>
<li>Adding a <code>b</code> (e.g., <code>"rb"</code>, <code>"wb+"</code>) opens the file in <strong>binary mode</strong>.</li>
</ul></li>
<li><strong>Reading and Writing</strong>: Once a file is open, various functions can be used to interact with it, such as:
<ul>
<li><code>fprintf(fp, "...", ...)</code> and <code>fscanf(fp, "...", ...)</code>: Work like <code>printf</code> and <code>scanf</code> but operate on a file stream.</li>
<li><code>fputs(str, fp)</code> and <code>fgets(buffer, size, fp)</code>: Write and read strings (lines) from a file.</li>
</ul></li>
<li><strong>Closing a File</strong>: The <code>fclose(fp)</code> function must be called when you are finished with a file. This flushes any buffered data to the disk and releases the file handle.</li>
</ul>
</section>
</section>
<section id="definitions" class="level4">
<h4 class="anchored" data-anchor-id="definitions">2. Definitions</h4>
<ul>
<li><strong>Pointer</strong>: A variable that stores the memory address of another variable.</li>
<li><strong>Dereferencing</strong>: The act of accessing the value stored at the memory address a pointer is pointing to, using the <code>*</code> operator.</li>
<li><strong>Dangling Pointer</strong>: A pointer that points to a memory location that has already been deallocated (freed). Using it leads to undefined behavior.</li>
<li><strong>Memory Leak</strong>: A situation in which memory allocated on the heap is no longer needed but is not released (freed). This consumes available memory and can eventually cause a program to fail.</li>
<li><strong>Heap</strong>: A region of a program’s memory used for dynamic memory allocation, managed by <code>malloc()</code> and <code>free()</code>.</li>
<li><strong>Stack</strong>: A region of memory used for static memory allocation, managing local variables and function call information. Memory is automatically allocated and deallocated as functions are called and return.</li>
<li><strong>Preprocessor</strong>: A program that processes the source code before it is passed to the compiler, handling directives like <code>#include</code> and <code>#define</code>.</li>
<li><strong>Macro</strong>: A fragment of code that has been given a name. When the name is used, it is replaced by the contents of the macro through simple text substitution by the preprocessor.</li>
<li><strong><code>typedef</code></strong>: A keyword in C used to create an alias or synonym for an existing data type, often to simplify complex type declarations.</li>
<li><strong><code>FILE</code> stream</strong>: A data structure defined in <code>&lt;stdio.h&gt;</code> that represents an input or output file. It is accessed via a pointer (<code>FILE *</code>).</li>
</ul>
</section>
<section id="mistakes" class="level4">
<h4 class="anchored" data-anchor-id="mistakes">3. Mistakes</h4>
<ul>
<li><strong>Forgetting to Free Allocated Memory</strong>: Every call to <code>malloc()</code> must have a corresponding call to <code>free()</code>. <strong>Why it’s wrong</strong>: Failing to free memory causes a memory leak. The program will consume more and more memory over its lifetime, which can lead to it slowing down or crashing.</li>
<li><strong>Dereferencing a <code>NULL</code> or Uninitialized Pointer</strong>: Attempting to use a pointer that has not been assigned a valid memory address. <strong>Why it’s wrong</strong>: This results in undefined behavior. On most modern operating systems, it will cause a segmentation fault and crash the program, as it’s an attempt to access a protected or invalid memory location.</li>
<li><strong>Unsafe Macro Definitions</strong>: Writing function-like macros without proper parenthesizing. Consider <code>#define MULTIPLY(a, b) a * b</code>. If used as <code>MULTIPLY(2 + 3, 4)</code>, it expands to <code>2 + 3 * 4</code>, which evaluates to <code>14</code>, not the expected <code>20</code>. <strong>Why it’s wrong</strong>: Macros are simple text substitution, not true function calls. The C order of operations applies to the expanded text. The correct definition is <code>#define MULTIPLY(a, b) ((a) * (b))</code>.</li>
<li><strong>Returning a Pointer to a Local Variable</strong>: A function’s local variables exist on the stack and are destroyed when the function returns. <strong>Why it’s wrong</strong>: Returning a pointer to such a variable creates a dangling pointer. The memory location it points to is no longer valid and may be overwritten by subsequent function calls, leading to corrupted data and unpredictable behavior.</li>
<li><strong>Forgetting to Check if <code>fopen()</code> Returned <code>NULL</code></strong>: <code>fopen()</code> returns <code>NULL</code> if it fails to open a file (e.g., file not found in read mode, no permissions). <strong>Why it’s wrong</strong>: If you proceed to use the <code>NULL</code> <code>FILE</code> pointer with functions like <code>fprintf()</code> or <code>fclose()</code>, your program will crash. Always check the return value of <code>fopen()</code> before using the file pointer.</li>
</ul>
</section>
<section id="examples" class="level4">
<h4 class="anchored" data-anchor-id="examples">4. Examples</h4>
<section id="example-1-pointer-manipulation" class="level5">
<h5 class="anchored" data-anchor-id="example-1-pointer-manipulation">Example 1: Pointer Manipulation</h5>
<p><strong>Question:</strong> What will be the final output of the following C code?</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>p1 <span class="op">=</span> <span class="op">&amp;</span>x<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>p2 <span class="op">=</span> <span class="op">&amp;</span>y<span class="op">;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>p1 <span class="op">=</span> <span class="op">*</span>p2 <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    p2 <span class="op">=</span> p1<span class="op">;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>p2 <span class="op">=</span> <span class="op">*</span>p2 <span class="op">-</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">"x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">"</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<details>
<summary>
Click to see the solution
</summary>
<ol type="1">
<li><strong>Initialization</strong>: <code>x</code> is 10, <code>y</code> is 20. <code>p1</code> points to <code>x</code>, <code>p2</code> points to <code>y</code>.</li>
<li><strong><code>*p1 = *p2 + 5;</code></strong>: The value at <code>p1</code> (which is <code>x</code>) becomes the value at <code>p2</code> (which is <code>y</code>, i.e., 20) plus 5. So, <code>x</code> is now 25. <code>y</code> is still 20.</li>
<li><strong><code>p2 = p1;</code></strong>: Pointer <code>p2</code> is changed to hold the same address as <code>p1</code>. Now, both <code>p1</code> and <code>p2</code> point to <code>x</code>. <code>p2</code> no longer points to <code>y</code>.</li>
<li><strong><code>*p2 = *p2 - 3;</code></strong>: The value at <code>p2</code> (which is <code>x</code>) is updated. <code>x</code> becomes its current value (25) minus 3. So, <code>x</code> is now 22. The variable <code>y</code> is unaffected by this step because no pointer is pointing to it anymore.</li>
<li><strong><code>printf</code></strong>: The final values of <code>x</code> and <code>y</code> are printed.</li>
</ol>
<p><strong>Answer:</strong></p>
<pre><code>x = 22, y = 20</code></pre>
</details>
</section>
<section id="example-2-interpreting-a-complex-declaration" class="level5">
<h5 class="anchored" data-anchor-id="example-2-interpreting-a-complex-declaration">Example 2: Interpreting a Complex Declaration</h5>
<p><strong>Question:</strong> Describe in plain English the type of the variable <code>a4</code> in the following C declaration: <code>int (*(a4[10]))(int);</code></p>
<details>
<summary>
Click to see the solution
</summary>
<p>We use the Clockwise/Spiral Rule, starting from the variable name <code>a4</code>.</p>
<ol type="1">
<li><strong>Start at <code>a4</code></strong>: “<code>a4</code> is…”</li>
<li><strong>Move right, find <code>[10]</code></strong>: “…an array of 10…”</li>
<li><strong>Move left, find <code>*</code> inside parentheses</strong>: “…pointers to…”</li>
<li><strong>Move out of parentheses, find <code>(int)</code></strong>: “…a function that takes an <code>int</code> parameter…”</li>
<li><strong>Move left to the beginning, find <code>int</code></strong>: “…and returns an <code>int</code>.”</li>
</ol>
<strong>Answer:</strong> <strong><code>a4</code> is an array of 10 pointers to functions, where each function takes an integer as an argument and returns an integer.</strong>
</details>
</section>
<section id="example-3-safe-macro-usage" class="level5">
<h5 class="anchored" data-anchor-id="example-3-safe-macro-usage">Example 3: Safe Macro Usage</h5>
<p><strong>Question:</strong> A programmer writes a macro to find the maximum of two numbers: <code>#define MAX(a, b) a &gt; b ? a : b</code>. Explain what is wrong with this macro and provide a corrected version. Test both with the expression <code>MAX(5, 10-8)</code>.</p>
<details>
<summary>
Click to see the solution
</summary>
<ol type="1">
<li><strong>Identify the Flaw</strong>: The original macro uses simple text replacement without parentheses around its arguments.</li>
<li><strong>Test the Flawed Macro</strong>: The expression <code>MAX(5, 10-8)</code> would be expanded by the preprocessor to <code>5 &gt; 10-8 ? 5 : 10-8</code>.</li>
<li><strong>Evaluate based on C precedence</strong>: Due to operator precedence, the <code>&gt;</code> comparison is evaluated before the <code>-</code> subtraction. The expression becomes <code>(5 &gt; 10) - 8</code>.</li>
<li><strong>Calculate the incorrect result</strong>: <code>5 &gt; 10</code> is false (evaluates to 0). So the expression becomes <code>0 - 8</code>, which is <code>-8</code>. This is incorrect; the maximum of 5 and 2 is 5.</li>
<li><strong>Correct the Macro</strong>: To fix this, we must wrap each argument and the entire expression in parentheses. This ensures that the arguments are fully evaluated before being used in the macro’s logic, and the macro’s result is treated as a single unit.</li>
</ol>
<strong>Answer:</strong> The macro is unsafe because operator precedence can cause expressions passed as arguments to be evaluated incorrectly. The corrected, safe version is: <strong><code>#define MAX(a, b) ((a) &gt; (b) ? (a) : (b))</code></strong>
</details>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>