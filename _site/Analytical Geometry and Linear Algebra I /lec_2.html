<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Zakhar Podyakov">
<meta name="dcterms.date" content="2025-09-16">

<title>2. Inner Product, Dot Product, Vector Norms, Orthogonality, Vector Projection</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-42ed7287b56c5c583e2c2463c9cf4916.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Analytical Geometry and Linear Algebra I /lec_1.html">Analytical Geometry and Linear Algebra I</a></li><li class="breadcrumb-item"><a href="../Analytical Geometry and Linear Algebra I /lec_2.html">2. Inner Product, Dot Product, Vector Norms, Orthogonality, Vector Projection</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Academic Writing and Argumentation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Academic Writing and Argumentation/lec_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Effective Sentence Structure, Clauses, and Sentence Types</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Academic Writing and Argumentation/lec_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Principles of Effective Academic Writing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Academic Writing and Argumentation/lec_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. Sentence Problems, Punctuation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Academic Writing and Argumentation/lec_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4. Writing an Effective Paragraph, Paragraph Structure, Transitions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Academic Writing and Argumentation/lec_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5. Avoiding Plagiarism, Referencing, Summarizing, Paraphrasing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Academic Writing and Argumentation/lec_6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">6. Descriptive Paragraph</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Analytical Geometry and Linear Algebra I</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Analytical Geometry and Linear Algebra I /lec_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Vectors, Vector Spaces, and Linear Independence</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Analytical Geometry and Linear Algebra I /lec_2.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">2. Inner Product, Dot Product, Vector Norms, Orthogonality, Vector Projection</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Analytical Geometry and Linear Algebra I /lec_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. Matrices and Determinants, Vector Cross Product, Scalar Triple Product</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Computer Architecture</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Computer Architecture/lec_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Computer Architecture Fundamentals, CPU Components, Memory Hierarchy, FPGAs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Computer Architecture/lec_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. FPGA Project Workflow in Quartus Prime, Fundamental Ideas of Computer Architecture</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Discrete Mathematics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Discrete Mathematics/lec_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Truth Tables, Disjunctive Normal Form (DNF), Conjunctive Normal Form (CNF)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Discrete Mathematics/lec_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Logical Equivalence, Normal Forms (DNF, CNF, ANF)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Introduction to Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Introduction to Programming/lec_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Introduction to Programming, The C Language, Compilation and Memory Model</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Introduction to Programming/lec_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. C Programming Fundamentals: Memory, Pointers, and Types</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Introduction to Programming/lec_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3. C Pointers, Declarations, Preprocessing, and File I/O</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Mathematical Analysis I</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Mathematical Analysis I/lec_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1. Set Theory, Complex Numbers, Mathematical Induction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Mathematical Analysis I/lec_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2. Complex Numbers in Trigonometric Form, Mathematical Induction</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Analytical Geometry and Linear Algebra I /lec_1.html">Analytical Geometry and Linear Algebra I</a></li><li class="breadcrumb-item"><a href="../Analytical Geometry and Linear Algebra I /lec_2.html">2. Inner Product, Dot Product, Vector Norms, Orthogonality, Vector Projection</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">2. Inner Product, Dot Product, Vector Norms, Orthogonality, Vector Projection</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Zakhar Podyakov </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 16, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="summary" class="level4">
<h4 class="anchored" data-anchor-id="summary">1. Summary</h4>
<section id="the-inner-product" class="level5">
<h5 class="anchored" data-anchor-id="the-inner-product">1.1 The Inner Product</h5>
<p>An <strong>inner product</strong> is a function that takes two vectors and produces a single scalar number. Think of it as a generalized way to multiply two vectors. For an operation to be considered a valid inner product on a vector space, it must satisfy four key properties, often called axioms:</p>
<ol type="1">
<li><strong>Symmetry</strong>: The order of the vectors doesn’t matter. <span class="math display">\[ \langle u, v \rangle = \langle v, u \rangle \]</span></li>
<li><strong>Linearity</strong>: Scaling one of the vectors by a constant <code>c</code> scales the entire inner product by <code>c</code>. <span class="math display">\[ \langle cu, v \rangle = c \langle u, v \rangle \]</span></li>
<li><strong>Additivity</strong>: The inner product distributes over vector addition. <span class="math display">\[ \langle u + w, v \rangle = \langle u, v \rangle + \langle w, v \rangle \]</span></li>
<li><strong>Positive Definiteness</strong>: The inner product of a vector with itself is always non-negative. It is zero <em>if and only if</em> the vector itself is the zero vector. <span class="math display">\[ \langle v, v \rangle \ge 0 \quad \text{and} \quad \langle v, v \rangle = 0 \iff v = 0 \]</span></li>
</ol>
<p>A vector space equipped with a specific inner product is called an <strong>inner product space</strong>.</p>
</section>
<section id="the-dot-product-the-standard-inner-product-on-mathbbrn" class="level5">
<h5 class="anchored" data-anchor-id="the-dot-product-the-standard-inner-product-on-mathbbrn">1.2 The Dot Product: The Standard Inner Product on <span class="math inline">\(\mathbb{R}^n\)</span></h5>
<p>The most common example of an inner product is the <strong>dot product</strong> (also known as the Euclidean inner product). For two vectors <span class="math inline">\(u = (u_1, u_2, \dots, u_n)\)</span> and <span class="math inline">\(v = (v_1, v_2, \dots, v_n)\)</span> in <span class="math inline">\(\mathbb{R}^n\)</span>, the dot product is defined as the sum of the products of their corresponding components:</p>
<p><span class="math display">\[ u \cdot v = u_1v_1 + u_2v_2 + \dots + u_nv_n = \sum_{i=1}^{n} u_i v_i \]</span></p>
<p>The dot product satisfies all four axioms of an inner product and is the foundation for Euclidean geometry in two and three dimensions.</p>
</section>
<section id="vector-norm-length" class="level5">
<h5 class="anchored" data-anchor-id="vector-norm-length">1.3 Vector Norm (Length)</h5>
<p>The inner product provides a natural way to define the <strong>length</strong> or <strong>norm</strong> of a vector. The norm of a vector <span class="math inline">\(v\)</span>, denoted <span class="math inline">\(\|v\|\)</span>, is the square root of the inner product of the vector with itself:</p>
<p><span class="math display">\[ \|v\| = \sqrt{\langle v, v \rangle} \]</span></p>
<p>For the standard dot product in <span class="math inline">\(\mathbb{R}^n\)</span>, this becomes the familiar distance formula: <span class="math inline">\(\|v\| = \sqrt{v_1^2 + v_2^2 + \dots + v_n^2}\)</span>.</p>
</section>
<section id="geometric-interpretation-angles-and-the-dot-product" class="level5">
<h5 class="anchored" data-anchor-id="geometric-interpretation-angles-and-the-dot-product">1.4 Geometric Interpretation: Angles and the Dot Product</h5>
<p>The dot product elegantly connects algebra with geometry. For two non-zero vectors <span class="math inline">\(v\)</span> and <span class="math inline">\(w\)</span>, their dot product is related to the angle <span class="math inline">\(\theta\)</span> between them by the formula:</p>
<p><span class="math display">\[ v \cdot w = \|v\| \|w\| \cos \theta \]</span></p>
<p>This relationship is fundamental. It allows us to calculate the angle between two vectors:</p>
<p><span class="math display">\[ \theta = \arccos\left(\frac{v \cdot w}{\|v\| \|w\|}\right) \]</span></p>
<p>The sign of the dot product tells us about the angle: * <strong>Positive (<span class="math inline">\(v \cdot w &gt; 0\)</span>)</strong>: The angle <span class="math inline">\(\theta\)</span> is acute (<span class="math inline">\(&lt; 90^\circ\)</span>). * <strong>Zero (<span class="math inline">\(v \cdot w = 0\)</span>)</strong>: The angle <span class="math inline">\(\theta\)</span> is a right angle (<span class="math inline">\(= 90^\circ\)</span>). The vectors are <strong>orthogonal</strong>. * <strong>Negative (<span class="math inline">\(v \cdot w &lt; 0\)</span>)</strong>: The angle <span class="math inline">\(\theta\)</span> is obtuse (<span class="math inline">\(&gt; 90^\circ\)</span>).</p>
</section>
<section id="orthogonality" class="level5">
<h5 class="anchored" data-anchor-id="orthogonality">1.5 Orthogonality</h5>
<p>Two vectors are <strong>orthogonal</strong> (perpendicular) if their inner product is zero. This is a direct consequence of the geometric formula, since <span class="math inline">\(\cos(90^\circ) = 0\)</span>. This provides a simple algebraic test for perpendicularity.</p>
<p><span class="math display">\[ v \text{ is orthogonal to } w \iff v \cdot w = 0 \]</span></p>
</section>
<section id="vector-projection" class="level5">
<h5 class="anchored" data-anchor-id="vector-projection">1.6 Vector Projection</h5>
<p>Projection allows us to find the component of one vector that lies in the direction of another.</p>
<ul>
<li>The <strong>vector projection</strong> of <span class="math inline">\(v\)</span> onto <span class="math inline">\(w\)</span>, denoted <span class="math inline">\(\text{proj}_w(v)\)</span>, is the “shadow” that vector <span class="math inline">\(v\)</span> casts on vector <span class="math inline">\(w\)</span>. It is a vector that is parallel to <span class="math inline">\(w\)</span>.</li>
<li>The <strong>scalar projection</strong> of <span class="math inline">\(v\)</span> onto <span class="math inline">\(w\)</span>, denoted <span class="math inline">\(\text{comp}_w(v)\)</span>, is the <em>signed length</em> of this shadow. It is a scalar.</li>
</ul>
<p>The formulas are: <span class="math display">\[ \text{proj}_w(v) = \left(\frac{v \cdot w}{w \cdot w}\right) w \quad \text{and} \quad \text{comp}_w(v) = \frac{v \cdot w}{\|w\|} \]</span></p>
</section>
<section id="decomposing-a-vector" class="level5">
<h5 class="anchored" data-anchor-id="decomposing-a-vector">1.7 Decomposing a Vector</h5>
<p>Any vector <span class="math inline">\(v\)</span> can be broken down (decomposed) into two orthogonal components relative to another vector <span class="math inline">\(w\)</span>: 1. A component <strong>parallel</strong> to <span class="math inline">\(w\)</span>: <span class="math inline">\(v_{\parallel} = \text{proj}_w(v)\)</span>. 2. A component <strong>orthogonal</strong> to <span class="math inline">\(w\)</span>: <span class="math inline">\(v_{\perp} = v - v_{\parallel}\)</span>.</p>
<p>This gives us <span class="math inline">\(v = v_{\parallel} + v_{\perp}\)</span>, where <span class="math inline">\(v_{\parallel} \cdot v_{\perp} = 0\)</span>.</p>
</section>
<section id="key-inequalities" class="level5">
<h5 class="anchored" data-anchor-id="key-inequalities">1.8 Key Inequalities</h5>
<p>Two important inequalities arise from the properties of the inner product:</p>
<ul>
<li><strong>Cauchy-Schwarz Inequality</strong>: This states that the absolute value of the inner product of two vectors is always less than or equal to the product of their norms. <span class="math display">\[ |\langle v, w \rangle| \le \|v\| \|w\| \]</span></li>
<li><strong>Triangle Inequality</strong>: This states that the length of the sum of two vectors is less than or equal to the sum of their individual lengths. Geometrically, this means the length of one side of a triangle is never greater than the sum of the other two sides. <span class="math display">\[ \|v + w\| \le \|v\| + \|w\| \]</span></li>
</ul>
</section>
</section>
<section id="definitions" class="level4">
<h4 class="anchored" data-anchor-id="definitions">2. Definitions</h4>
<ul>
<li><strong>Inner Product</strong>: A function that takes two vectors from a vector space and returns a scalar, satisfying the axioms of symmetry, linearity, additivity, and positive definiteness.</li>
<li><strong>Dot Product</strong>: The standard inner product on <span class="math inline">\(\mathbb{R}^n\)</span>, calculated by summing the products of corresponding vector components.</li>
<li><strong>Inner Product Space</strong>: A vector space that has a defined inner product.</li>
<li><strong>Norm (Vector Length)</strong>: The length of a vector, defined as <span class="math inline">\(\|v\| = \sqrt{\langle v, v \rangle}\)</span>.</li>
<li><strong>Orthogonal Vectors</strong>: Two vectors whose inner product is zero.</li>
<li><strong>Vector Projection</strong>: The vector component of one vector that lies along the direction of a second vector.</li>
<li><strong>Scalar Projection</strong>: The signed length of the vector projection.</li>
</ul>
</section>
<section id="formulas" class="level4">
<h4 class="anchored" data-anchor-id="formulas">3. Formulas</h4>
<ul>
<li><strong>Dot Product (Algebraic)</strong>: <span class="math inline">\(u \cdot v = \sum_{i=1}^{n} u_i v_i\)</span></li>
<li><strong>Norm from Dot Product</strong>: <span class="math inline">\(\|v\| = \sqrt{v \cdot v}\)</span></li>
<li><strong>Dot Product (Geometric)</strong>: <span class="math inline">\(v \cdot w = \|v\| \|w\| \cos \theta\)</span></li>
<li><strong>Angle Between Vectors</strong>: <span class="math inline">\(\theta = \arccos\left(\frac{v \cdot w}{\|v\| \|w\|}\right)\)</span></li>
<li><strong>Vector Projection of <span class="math inline">\(v\)</span> onto <span class="math inline">\(w\)</span></strong>: <span class="math inline">\(\text{proj}_w(v) = \left(\frac{v \cdot w}{w \cdot w}\right) w\)</span></li>
<li><strong>Scalar Projection of <span class="math inline">\(v\)</span> onto <span class="math inline">\(w\)</span></strong>: <span class="math inline">\(\text{comp}_w(v) = \frac{v \cdot w}{\|w\|}\)</span></li>
<li><strong>Cauchy-Schwarz Inequality</strong>: <span class="math inline">\(|v \cdot w| \le \|v\| \|w\|\)</span></li>
<li><strong>Triangle Inequality</strong>: <span class="math inline">\(\|u + v\| \le \|u\| + \|v\|\)</span></li>
</ul>
</section>
<section id="mistakes" class="level4">
<h4 class="anchored" data-anchor-id="mistakes">4. Mistakes</h4>
<ul>
<li><strong>Assuming <span class="math inline">\(a \cdot b = a \cdot c\)</span> implies <span class="math inline">\(b=c\)</span></strong>: This is incorrect. The dot product does not have a general cancellation property. For example, if <span class="math inline">\(a = (1, 1)\)</span>, <span class="math inline">\(b = (2, 2)\)</span>, and <span class="math inline">\(c = (4, 0)\)</span>, then <span class="math inline">\(a \cdot b = 4\)</span> and <span class="math inline">\(a \cdot c = 4\)</span>, but clearly <span class="math inline">\(b \neq c\)</span>. <strong>Why it’s wrong:</strong> Geometrically, this condition means that <span class="math inline">\(b\)</span> and <span class="math inline">\(c\)</span> have the same projection onto <span class="math inline">\(a\)</span>, but their orthogonal components can be different.</li>
<li><strong>Confusing Scalar and Vector Projection</strong>: The scalar projection is a number (a signed length), while the vector projection is a vector. You cannot use one in place of the other. <strong>Why it’s wrong:</strong> They represent different concepts; one is a magnitude, and the other is a physical vector with both magnitude and direction.</li>
<li><strong>Incorrectly Defining Vectors for Angles in a Triangle</strong>: When finding an angle like <span class="math inline">\(\angle ABC\)</span>, the vectors used must both originate from the vertex <span class="math inline">\(B\)</span>. You must use vectors <span class="math inline">\(\vec{BA}\)</span> and <span class="math inline">\(\vec{BC}\)</span>, not <span class="math inline">\(\vec{AB}\)</span> and <span class="math inline">\(\vec{BC}\)</span>. <strong>Why it’s wrong:</strong> Using vectors that don’t share a common origin will result in calculating the exterior angle or a completely unrelated angle.</li>
<li><strong>Forgetting the Square Root for the Norm</strong>: The norm <span class="math inline">\(\|v\|\)</span> is <span class="math inline">\(\sqrt{v \cdot v}\)</span>. A common mistake is to forget the square root and use <span class="math inline">\(\|v\|^2\)</span> instead of <span class="math inline">\(\|v\|\)</span>. <strong>Why it’s wrong:</strong> This is a simple calculation error that affects all subsequent geometric calculations, such as finding angles or scalar projections.</li>
<li><strong>Normalizing the Wrong Vector in Projection</strong>: The projection formula <span class="math inline">\(\left(\frac{v \cdot w}{w \cdot w}\right) w\)</span> scales the vector <span class="math inline">\(w\)</span>. A mistake is to divide by <span class="math inline">\(v \cdot v\)</span> or multiply by <span class="math inline">\(v\)</span>. <strong>Why it’s wrong:</strong> You are projecting <em>onto</em> <span class="math inline">\(w\)</span>, so the resulting vector must be a multiple of <span class="math inline">\(w\)</span>. The scalar factor is determined by the dot products involving both vectors, but the direction is determined solely by <span class="math inline">\(w\)</span>.</li>
</ul>
</section>
<section id="examples" class="level4">
<h4 class="anchored" data-anchor-id="examples">5. Examples</h4>
<section id="example-1-dot-product-calculation" class="level5">
<h5 class="anchored" data-anchor-id="example-1-dot-product-calculation">Example 1: Dot Product Calculation</h5>
<p><strong>Question:</strong> Calculate the dot product of <span class="math inline">\(u = (1, -2, 4)\)</span> and <span class="math inline">\(v = (3, 0, -5)\)</span>.</p>
<details>
<summary>
Click to see the solution
</summary>
<ol type="1">
<li><strong>Multiply corresponding components:</strong>
<ul>
<li>x-components: <span class="math inline">\((1)(3) = 3\)</span></li>
<li>y-components: <span class="math inline">\((-2)(0) = 0\)</span></li>
<li>z-components: <span class="math inline">\((4)(-5) = -20\)</span></li>
</ul></li>
<li><strong>Sum the results:</strong> <span class="math display">\[ 3 + 0 + (-20) = -17 \]</span></li>
</ol>
<strong>Answer:</strong> The dot product <span class="math inline">\(u \cdot v\)</span> is <strong>-17</strong>.
</details>
</section>
<section id="example-2-finding-the-angle-between-vectors" class="level5">
<h5 class="anchored" data-anchor-id="example-2-finding-the-angle-between-vectors">Example 2: Finding the Angle Between Vectors</h5>
<p><strong>Question:</strong> Find the angle between <span class="math inline">\(u = (3, -1)\)</span> and <span class="math inline">\(v = (2, 4)\)</span>.</p>
<details>
<summary>
Click to see the solution
</summary>
<ol type="1">
<li><strong>Calculate the dot product <span class="math inline">\(u \cdot v\)</span>:</strong> <span class="math display">\[ u \cdot v = (3)(2) + (-1)(4) = 6 - 4 = 2 \]</span></li>
<li><strong>Calculate the norm of each vector:</strong> <span class="math display">\[ \|u\| = \sqrt{3^2 + (-1)^2} = \sqrt{9 + 1} = \sqrt{10} \]</span> <span class="math display">\[ \|v\| = \sqrt{2^2 + 4^2} = \sqrt{4 + 16} = \sqrt{20} \]</span></li>
<li><strong>Apply the angle formula:</strong> <span class="math display">\[ \cos \theta = \frac{u \cdot v}{\|u\| \|v\|} = \frac{2}{\sqrt{10} \sqrt{20}} = \frac{2}{\sqrt{200}} = \frac{2}{10\sqrt{2}} = \frac{1}{5\sqrt{2}} \]</span></li>
<li><strong>Find the angle <span class="math inline">\(\theta\)</span>:</strong> <span class="math display">\[ \theta = \arccos\left(\frac{1}{5\sqrt{2}}\right) \approx 81.87^\circ \]</span></li>
</ol>
<strong>Answer:</strong> The angle between the vectors is approximately <strong><span class="math inline">\(81.87^\circ\)</span></strong>.
</details>
</section>
<section id="example-3-finding-an-unknown-component-for-orthogonality" class="level5">
<h5 class="anchored" data-anchor-id="example-3-finding-an-unknown-component-for-orthogonality">Example 3: Finding an Unknown Component for Orthogonality</h5>
<p><strong>Question:</strong> Find the value(s) of <span class="math inline">\(x\)</span> such that the vectors <span class="math inline">\(u = (x, -1, 3)\)</span> and <span class="math inline">\(v = (x, 5, 1)\)</span> are orthogonal.</p>
<details>
<summary>
Click to see the solution
</summary>
<ol type="1">
<li><strong>Set the dot product to zero:</strong> For the vectors to be orthogonal, their dot product must be 0. <span class="math display">\[ u \cdot v = (x)(x) + (-1)(5) + (3)(1) = 0 \]</span></li>
<li><strong>Simplify the expression:</strong> <span class="math display">\[ x^2 - 5 + 3 = 0 \]</span> <span class="math display">\[ x^2 - 2 = 0 \]</span></li>
<li><strong>Solve for <span class="math inline">\(x\)</span>:</strong> <span class="math display">\[ x^2 = 2 \]</span> <span class="math display">\[ x = \pm\sqrt{2} \]</span></li>
</ol>
<strong>Answer:</strong> The vectors are orthogonal if <span class="math inline">\(x\)</span> is <strong><span class="math inline">\(\sqrt{2}\)</span> or <span class="math inline">\(-\sqrt{2}\)</span></strong>.
</details>
</section>
<section id="example-4-vector-and-scalar-projection" class="level5">
<h5 class="anchored" data-anchor-id="example-4-vector-and-scalar-projection">Example 4: Vector and Scalar Projection</h5>
<p><strong>Question:</strong> Find the vector and scalar projection of <span class="math inline">\(v = (5, 3)\)</span> onto <span class="math inline">\(w = (4, 0)\)</span>.</p>
<details>
<summary>
Click to see the solution
</summary>
<ol type="1">
<li><strong>Calculate the necessary dot products:</strong> <span class="math display">\[ v \cdot w = (5)(4) + (3)(0) = 20 \]</span> <span class="math display">\[ w \cdot w = (4)(4) + (0)(0) = 16 \]</span></li>
<li><strong>Calculate the norm of <span class="math inline">\(w\)</span> for the scalar projection:</strong> <span class="math display">\[ \|w\| = \sqrt{w \cdot w} = \sqrt{16} = 4 \]</span></li>
<li><strong>Calculate the vector projection:</strong> <span class="math display">\[ \text{proj}_w(v) = \left(\frac{v \cdot w}{w \cdot w}\right) w = \left(\frac{20}{16}\right) (4, 0) = \frac{5}{4} (4, 0) = (5, 0) \]</span></li>
<li><strong>Calculate the scalar projection:</strong> <span class="math display">\[ \text{comp}_w(v) = \frac{v \cdot w}{\|w\|} = \frac{20}{4} = 5 \]</span></li>
</ol>
<strong>Answer:</strong> The vector projection is <strong><span class="math inline">\((5, 0)\)</span></strong> and the scalar projection is <strong>5</strong>.
</details>
</section>
<section id="example-5-angle-in-a-triangle" class="level5">
<h5 class="anchored" data-anchor-id="example-5-angle-in-a-triangle">Example 5: Angle in a Triangle</h5>
<p><strong>Question:</strong> Given points <span class="math inline">\(A(1, 2)\)</span>, <span class="math inline">\(B(3, -1)\)</span>, and <span class="math inline">\(C(-2, 1)\)</span>, find the measure of angle <span class="math inline">\(\angle ABC\)</span>.</p>
<details>
<summary>
Click to see the solution
</summary>
<ol type="1">
<li><strong>Define vectors from the vertex B:</strong> The angle <span class="math inline">\(\angle ABC\)</span> is formed by vectors <span class="math inline">\(\vec{BA}\)</span> and <span class="math inline">\(\vec{BC}\)</span>. <span class="math display">\[ \vec{BA} = A - B = (1-3, 2-(-1)) = (-2, 3) \]</span> <span class="math display">\[ \vec{BC} = C - B = (-2-3, 1-(-1)) = (-5, 2) \]</span></li>
<li><strong>Calculate the dot product <span class="math inline">\(\vec{BA} \cdot \vec{BC}\)</span>:</strong> <span class="math display">\[ \vec{BA} \cdot \vec{BC} = (-2)(-5) + (3)(2) = 10 + 6 = 16 \]</span></li>
<li><strong>Calculate the norms <span class="math inline">\(\|\vec{BA}\|\)</span> and <span class="math inline">\(\|\vec{BC}\|\)</span>:</strong> <span class="math display">\[ \|\vec{BA}\| = \sqrt{(-2)^2 + 3^2} = \sqrt{4 + 9} = \sqrt{13} \]</span> <span class="math display">\[ \|\vec{BC}\| = \sqrt{(-5)^2 + 2^2} = \sqrt{25 + 4} = \sqrt{29} \]</span></li>
<li><strong>Apply the angle formula:</strong> <span class="math display">\[ \cos(\angle ABC) = \frac{16}{\sqrt{13}\sqrt{29}} = \frac{16}{\sqrt{377}} \]</span></li>
<li><strong>Find the angle:</strong> <span class="math display">\[ \angle ABC = \arccos\left(\frac{16}{\sqrt{377}}\right) \approx 35.84^\circ \]</span></li>
</ol>
<strong>Answer:</strong> The measure of angle <span class="math inline">\(\angle ABC\)</span> is approximately <strong><span class="math inline">\(35.84^\circ\)</span></strong>.
</details>
</section>
<section id="example-6-decomposing-a-vector" class="level5">
<h5 class="anchored" data-anchor-id="example-6-decomposing-a-vector">Example 6: Decomposing a Vector</h5>
<p><strong>Question:</strong> Decompose the vector <span class="math inline">\(a = (5, 1, -3)\)</span> into two vectors, one parallel to <span class="math inline">\(b = (1, 2, 2)\)</span> (<span class="math inline">\(a_\parallel\)</span>) and one orthogonal to it (<span class="math inline">\(a_\perp\)</span>).</p>
<details>
<summary>
Click to see the solution
</summary>
<ol type="1">
<li><strong>Find the parallel component (<span class="math inline">\(a_\parallel\)</span>) using vector projection:</strong> <span class="math display">\[ a_\parallel = \text{proj}_b(a) = \left(\frac{a \cdot b}{b \cdot b}\right) b \]</span></li>
<li><strong>Calculate the dot products:</strong> <span class="math display">\[ a \cdot b = (5)(1) + (1)(2) + (-3)(2) = 5 + 2 - 6 = 1 \]</span> <span class="math display">\[ b \cdot b = (1)^2 + (2)^2 + (2)^2 = 1 + 4 + 4 = 9 \]</span></li>
<li><strong>Calculate the parallel vector:</strong> <span class="math display">\[ a_\parallel = \left(\frac{1}{9}\right) (1, 2, 2) = \left(\frac{1}{9}, \frac{2}{9}, \frac{2}{9}\right) \]</span></li>
<li><strong>Find the orthogonal component (<span class="math inline">\(a_\perp\)</span>) by subtraction:</strong> <span class="math display">\[ a_\perp = a - a_\parallel = (5, 1, -3) - \left(\frac{1}{9}, \frac{2}{9}, \frac{2}{9}\right) \]</span> <span class="math display">\[ a_\perp = \left(5-\frac{1}{9}, 1-\frac{2}{9}, -3-\frac{2}{9}\right) = \left(\frac{44}{9}, \frac{7}{9}, -\frac{29}{9}\right) \]</span></li>
<li><strong>(Optional) Verify orthogonality:</strong> <span class="math display">\[ a_\parallel \cdot a_\perp = \left(\frac{1}{9}\right)\left(\frac{44}{9}\right) + \left(\frac{2}{9}\right)\left(\frac{7}{9}\right) + \left(\frac{2}{9}\right)\left(-\frac{29}{9}\right) = \frac{44 + 14 - 58}{81} = \frac{0}{81} = 0 \]</span> The dot product is 0, so the components are orthogonal.</li>
</ol>
<strong>Answer:</strong> The parallel component is <strong><span class="math inline">\(a_\parallel = (\frac{1}{9}, \frac{2}{9}, \frac{2}{9})\)</span></strong> and the orthogonal component is <strong><span class="math inline">\(a_\perp = (\frac{44}{9}, \frac{7}{9}, -\frac{29}{9})\)</span></strong>.
</details>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>